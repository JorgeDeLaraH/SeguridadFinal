<nav class="navbar bg-dark p-3 mb-3">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1 text-white">Bienvenido {{nombre}}</span>
  </div>
</nav>

<div *ngIf="mostrarNormal==true" class="container">
  <h1 class="text-center">Tabla de usuarios</h1>
  <button *ngIf="mostrarBotones==true" type="button" class="btn btn-primary ml-3 mb-5" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Agregar
  </button>
  <div class="row">
    <div class="col-12">
      <table class="table table-hover" style="border: solid 1px;">
        <thead class="thead-dark">
          <tr>
            <th scope="col"><i class="fa-solid fa-id-badge mr-1"></i> ID</th>
            <th scope="col"><i class="fa fa-user mr-1" aria-hidden="true"></i>Nombre</th>
            <th scope="col"><i class="fa-solid fa-envelope mr-1"></i>Curp</th>
            <th scope="col"><i class="fa-solid fa-turn-up mr-1"></i>Nivel</th>
            <th scope="col"><i class="fa-solid fa-pen-to-square mr-1 text-center"></i>Acciones
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of normales; index as i">
            <td>{{i+1}}</td>
            <td>{{item[1].fullName}}</td>
            <td>{{item[1].Curp}}</td>
            <td>{{item[1].Role}}</td>
            <td *ngIf="mostrarBotones==true"><button class="btn-warning btn mx-3" data-bs-toggle="modal" data-bs-target="#editar" (click)="capturar(item[1]._id)">Editar</button><button
                (click)="capDel(item[1]._id)" class="btn-danger btn" data-bs-target="#borrar" data-bs-toggle="modal">Eliminar</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div *ngIf="mostrarAdmin==true" class="container">
  <h1 class="text-center">Tabla de Admins</h1>
  <div class="row">
    <div class="col-12">
      <table class="table table-hover" style="border: solid 1px;">
        <thead class="thead-dark">
          <tr>
            <th scope="col"><i class="fa-solid fa-id-badge mr-1"></i> ID</th>
            <th scope="col"><i class="fa fa-user mr-1" aria-hidden="true"></i>Nombre</th>
            <th scope="col"><i class="fa-solid fa-envelope mr-1"></i>Curp</th>
            <th scope="col"><i class="fa-solid fa-turn-up mr-1"></i>Nivel</th>
            <th scope="col"><i class="fa-solid fa-pen-to-square mr-1"></i>Acciones
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of admin; index as i">
            <td>{{i+1}}</td>
            <td>{{item[1].fullName}}</td>
            <td>{{item[1].Curp}}</td>
            <td>{{item[1].Role}}</td>
            <td *ngIf="mostrarBotones==true"><button (click)="capturar(item[1]._id)" class="btn-warning btn mx-3" data-bs-toggle="modal" data-bs-target="#editar">Editar</button><button
              (click)="capDel(item[1]._id)" class="btn-danger btn" data-bs-target="#borrar" data-bs-toggle="modal">Eliminar</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div *ngIf="mostrarSuper==true" class="container">
  <h1 class="text-center">Tabla de SuperAdmin</h1>
  <div class="row">
    <div class="col-12">
      <table class="table table-hover" style="border: solid 1px;">
        <thead class="thead-dark">
          <tr>
            <th scope="col"><i class="fa-solid fa-id-badge mr-1"></i> ID</th>
            <th scope="col"><i class="fa fa-user mr-1" aria-hidden="true"></i>Nombre</th>
            <th scope="col"><i class="fa-solid fa-envelope mr-1"></i>Curp</th>
            <th scope="col"><i class="fa-solid fa-turn-up mr-1"></i>Nivel</th>
            <th scope="col"><i class="fa-solid fa-pen-to-square mr-1"></i>Acciones
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of superAdmin; index as i">
            <td>{{i+1}}</td>
            <td>{{item[1].fullName}}</td>
            <td>{{item[1].Curp}}</td>
            <td>{{item[1].Role}}</td>
            <td *ngIf="mostrarBotones==true"><button (click)="capturar(item[1]._id)" class="btn-warning btn mx-3" data-bs-toggle="modal" data-bs-target="#editar">Editar</button><button
              (click)="capDel(item[1]._id)"  class="btn-danger btn" data-bs-target="#borrar" data-bs-toggle="modal">Eliminar</button></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Agregar -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!--capturamos los datos-->
        <form>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Usuario</label>
            <input [(ngModel)]="agregarPersona.user" type="text" class="form-control" aria-describedby="emailHelp" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Nombre Completo</label>
            <input [(ngModel)]="agregarPersona.fullname" type="text" class="form-control" aria-describedby="emailHelp" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Curp</label>
            <input [(ngModel)]="agregarPersona.curp" type="text" class="form-control" aria-describedby="emailHelp" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="input-group mb-3">
            <label class="input-group-text" for="inputGroupSelect01">Rol</label>
            <select [(ngModel)]="agregarPersona.rol" class="form-select" id="inputGroupSelect01" [ngModelOptions]="{standalone: true}">
              <option selected>Elige una opción</option>
              <option value="NormalUser">Usuario Normal</option>
              <option value="Admin">Admin</option>
              <option value="SuperAdmin">Super Admin</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Password</label>
            <input [(ngModel)]="agregarPersona.password" type="password" class="form-control" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Confirma por favor</label>
            <input [(ngModel)]="agregarPersona.password1" type="password" class="form-control" [ngModelOptions]="{standalone: true}">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button (click)="register()" type="button" class="btn btn-primary" data-bs-dismiss="modal">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>
<!--Editar-->
<div class="modal fade" id="editar" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel1">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!--capturamos los datos-->
        <form>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Usuario</label>
            <input [(ngModel)]="personaCapturada.user" type="text" class="form-control" aria-describedby="emailHelp" [ngModelOptions]="{standalone: true}" [value]="personaCapturada.user">
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Nombre Completo</label>
            <input [(ngModel)]="personaCapturada.fullname" type="text" class="form-control" aria-describedby="emailHelp" [ngModelOptions]="{standalone: true}" [value]="personaCapturada.fullname">
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Curp</label>
            <input [(ngModel)]="personaCapturada.curp" type="text" class="form-control" aria-describedby="emailHelp" [ngModelOptions]="{standalone: true}" [value]="personaCapturada.curp">
          </div>
          <div class="input-group mb-3">
            <label class="input-group-text" for="inputGroupSelect01">Rol</label>
            <select [(ngModel)]="personaCapturada.rol" class="form-select" id="inputGroupSelect01" [ngModelOptions]="{standalone: true}" [value]="personaCapturada.rol">
              <option selected>Elige una opción</option>
              <option value="NormalUser">Usuario Normal</option>
              <option value="Admin">Admin</option>
              <option value="SuperAdmin">Super Admin</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Password</label>
            <input [(ngModel)]="personaCapturada.password" type="password" class="form-control" [ngModelOptions]="{standalone: true}">
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">Confirma por favor</label>
            <input [(ngModel)]="personaCapturada.password1" type="password" class="form-control" [ngModelOptions]="{standalone: true}">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button (click)="update()" type="button" data-bs-dismiss="modal" class="btn btn-primary">Guardar Cambios</button>
      </div>
    </div>
  </div>
</div>
<!--Borrar usuario-->
<div class="modal fade" id="borrar" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel1">Borrar</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!--capturamos los datos-->
        <h3>Estas seguro de borrar al usuario?</h3>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button (click)="deleteUser()" type="button" class="btn btn-danger" data-bs-dismiss="modal">Borrar</button>
      </div>
    </div>
  </div>
</div>